<form class="form-container" #form="ngForm" (submit)="salvarProduto()">
  <h2 class="form-title">ADICIONAR PRODUTO</h2>

  <div class="form-group">
    <label for="nome">Nome</label>
    <input
      id="nome"
      type="text"
      name="nome"
      placeholder="Nome"
      required
      [(ngModel)]="produto.nome"
    />
    <div class="mensagens-validacao" *ngFor="let erro of erros.erros">
      <p *ngIf="erro.campo == 'nome'">{{ erro.mensagem }}</p>
    </div>
  </div>

  <div class="form-group">
    <label for="descricao">Descrição</label>
    <textarea
      id="descricao"
      type="text"
      name="descricao"
      placeholder="Descrição"
      required
      [(ngModel)]="produto.descricao"
    ></textarea>
    <div class="mensagens-validacao" *ngFor="let erro of erros.erros">
      <p *ngIf="erro.campo == 'descricao'">{{ erro.mensagem }}</p>
    </div>
  </div>

  <div class="form-group">
    <label for="preco">Preço</label>
    <input
      id="preco"
      type="number"
      name="preco"
      placeholder="Preço"
      required
      [(ngModel)]="produto.preco"
    />
    <div class="mensagens-validacao" *ngFor="let erro of erros.erros">
      <p *ngIf="erro.campo == 'preco'">{{ erro.mensagem }}</p>
    </div>
  </div>

  <div class="form-group">
    <label for="quantidadeEstoque">Quantidade em estoque</label>
    <input
      id="quantidadeEstoque"
      type="number"
      name="quantidadeEstoque"
      placeholder="Quantidade em estoque"
      required
      [(ngModel)]="produto.quantidadeEstoque"
    />
    <div class="mensagens-validacao" *ngFor="let erro of erros.erros">
      <p *ngIf="erro.campo == 'quantidadeEstoque'">{{ erro.mensagem }}</p>
    </div>
  </div>

  <div class="form-group">
    <label for="imagem">Imagem do produto</label>
    <input
      id="imagem"
      type="file"
      name="imagem"
      placeholder="Imagem"
      required
      #inputImagem
      (change)="onFileSelected($event)"
    />
    <div class="mensagens-validacao" *ngFor="let erro of erros.erros">
      <p *ngIf="erro.campo == 'imagem'">{{ erro.mensagem }}</p>
    </div>
  </div>

  <div class="form-group">
    <label for="categoria">Categoria</label>
    <select
      id="categoria"
      name="categoria"
      required
      [(ngModel)]="categoriaSelecionadaId"
      (ngModelChange)="onSelectCategoriaPai($event)"
    >
      <option [ngValue]="null" disabled selected>Selecione uma categoria</option>
      <option *ngFor="let categoria of categorias" [value]="categoria.id">
        {{ categoria.nome }}
      </option>
    </select>
    <div class="mensagens-validacao" *ngFor="let erro of erros.erros">
      <p *ngIf="erro.campo == 'categoriaId'">{{ erro.mensagem }}</p>
    </div>
  </div>

  <div class="form-group" *ngIf="subcategorias.length">
    <label for="subcategoria">Subcategoria</label>
    <select
      id="subcategoria"
      name="subcategoria"
      [(ngModel)]="subcategoriaSelecionadaId"
    >
      <option [ngValue]="null" disabled selected>Selecione uma subcategoria</option>
      <option *ngFor="let subcategoria of subcategorias" [value]="subcategoria.id">
        {{ subcategoria.nome }}
      </option>
    </select>
  </div>

  <div *ngIf="mensagemSucesso" class="mensagem-sucesso">
    Produto salvo com sucesso!
  </div>

  <div class="form-buttons">
    <a routerLink="/admin/products" class="btn cancel">CANCELAR</a>
    <button
      type="submit"
      class="btn save"
    >
      SALVAR
    </button>
  </div>
</form>
